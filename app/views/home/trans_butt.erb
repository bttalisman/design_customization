


<form id='butt_form' action='trans_butt_settings'>

  <div class='row'>
    <div class='col col-md-1'></div>
    <div class='col col-md-4'>

      <div class='panel panel-default'>
        <div class='panel-heading'>
          <h3 class='panel-title'>Make Trans-Butt Text Leggings</h3>
        </div>
        <div class='panel-body'>

          <div class='input-group' style='margin-bottom:20px;'>
            <span class='input-group-addon' id='basic-addon1'>Text</span>
            <input type='text' class='form-control' id='text' name='text' aria-describedby='basic-addon1'>
            </input>
          </div>

          <div class='input-group' style='margin-bottom:20px;'>
            <span class='input-group-addon' id='basic-addon2'>Height to Width Ratio</span>
            <input type='text' class='form-control' id='h_to_w' name='h_to_w' aria-describedby='basic-addon2'>
            </input>
          </div>


          <div id='colorpicker_container' style='display:inline-block; margin-bottom:20px;'>
            <div class='input-group' style='float:left; width:90%;'>
              <span class='input-group-addon' id='basic-addon4'>Text Color</span>
              <select name='color' id='color_val' style='width:98%;' aria-describedby='basic-addon4' class='form-control'>
                <option disabled selected='selected'>Pick a Color</option>
  <%=           @colors.each do |c| %>
                  <option title='<%= c.description %>' value='<%= c.hex_code %>' <%= if( c.hex_code == @text_color ) then 'selected' end %> ><%= c.hex_code %></option>
  <%            end %>
              </select>
            </div>
            <div id='swatch' style='display:inline-block; float:left; height:27px; width:27px; background:<%= @text_color %>'></div>
          </div>


          <div class='input-group' style='margin-bottom:20px;'>
            <span class='input-group-addon' id='basic-addon5'>Alignment</span>
            <select class='form-control' style='width:200px;' name='align' id='align'>
              <option value='top'>Top</option>
              <option value='center'>Center</option>
              <option value='bottom'>Bottom</option>
            </select>
          </div>


          <a class='btn btn-default' id='' onclick='submit(); return false;'>Make It</a>

        </div> <!-- /panel body -->
      </div> <!-- /panel -->
    </div> <!--  -->
    <div class='col-md-1'></div>
    <div class='col-md-5'>
      <div id='panel_container'></div>
    </div>
  </div> <!-- /row -->
</form>


<script>
  function submit()
  {
    var form = $('#butt_form');
    form.submit();
  }


  $(document).ready(function() {
    $("[id^='color_val']").select2({
      templateResult: formatColor
    });

    $("[id^='colorpicker_container']").each( bindSwatch );
  });

  function bindSwatch( ) {
    $(this).find( 'select' ).change( { swatch:$(this).find( "[id^='swatch']" ) }, changeTextColor );
  }

  function formatColor (color) {
    if (!color.id) { return color.text; }
    var $color = $(
      '<span><div style="display:inline-block; height:20px; width:20px; background:' + color.element.value + '"></div><div style="height:20px; margin-left:5px; display:inline-block; vertical-align:top;">' + color.text + '</div></span>'
    );
    return $color;
  }


  function changeTextColor( event )
  {
    var swatch = event.data.swatch;
    var select = event.target;
    var val = select.value;
    swatch.css( 'background', val );
  }



</script>
