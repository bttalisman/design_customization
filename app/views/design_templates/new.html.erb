<h1>New Template</h1>

<%=
form_for @design_template, html: { multipart: true } do |form|
%>

<div class='container' style='width:100%;'>

  <div style='flex:1;'>

    <p>
      <%= form.label :name %><br/>
      <%= form.text_field :name %><br/>
    </p>


    <div id='selected_file_name' style='display: none;'></div>

    <span class="btn btn-default fileinput-button" id='file_input_container'>
          <span>Select file</span>
          <input type="file" onchange='fileInputChange( event );' name="design_template[original_file]" id="design_template_original_file">
    </span>



    <input name='stayAfterSave' id='stayAfterSave' style='display:none;'></input>

    <div style='width: 100%;'>
      <button class='btn btn-default' id='set_prefs' onclick='setPrefs();' style='display: none;'>Set Preferences</button>
      <button class='btn btn-default' onclick='save();'>Save</button>
      <a class='btn btn-default' href='http://localhost:3000/design_templates'>Cancel</a>
    </div>


  </div>


  <div id='panel_container' style='flex:1;' ></div>

</div>

<%
end
%>


<script>





  function save()
  {
    $('#stayAfterSave').val( 'false');
  }

  function setPrefs()
  {
    $('#stayAfterSave').val( 'true');
  }



  function fileInputChange( event )
  {
    var filePath = event.target.value;
    filePath = filePath.replace(/.*[\/\\]/, '');

    if( filePath != '' )
    {
      var $FileName = $('#selected_file_name');
      $FileName.text( filePath );
      $FileName.show();

      $('#file_input_container').hide();

      $('#set_prefs').show();
    }
  }

  $(document).ready(function(){


  });




</script>
