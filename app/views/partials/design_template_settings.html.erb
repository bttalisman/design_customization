
<!-- This page is at the top of those settings responsible for extending a
design_template.  All subpages included within provide UI for some aspect of
a design template that must be determined from opening a design AI file and
extracting information. -->

<%
  rendering_tags_form = false
  rendering_images_form = false

  if !@tags.nil?
    if !@tags.empty?
      rendering_tags_form = true
      logger.info 'design_template_settings.html - About to render tags.'
%>
<%=   render :partial => 'design_template_tags' %>
<%
    end
  end
%>

<%
  if !@images.nil?
    if !@images.empty?
      rendering_images_form = true
      logger.info 'design_template_settings.html - About to render images.'
%>
<%=   render :partial => 'design_template_images' %>
<%  end
  end %>
<script>



  function validate_design_template_settings()
  {
    var bReturn = true;
    <%
    if rendering_tags_form %>
        if( !validate_tag_values() )
        {
          bReturn = false;
        }
    <%
    end %>

    <%
    if rendering_images_form %>
      if( !validate_image_values() )
      {
        bReturn = false;
      }
    <%
    end %>

    return bReturn;
  }




  function build_template_settings()
  {
    var oTags = {};
    var oImages = {};
<%  if rendering_tags_form %>
      oTags = build_tags_data();
<%  end %>

<%  if rendering_images_form %>
      oImages = build_images();
<%  end %>

    // This object will become DesignTemplate.prompts
    oReturn = {};
    oReturn[ '<%= PROMPTS_KEY_TAG_SETTINGS %>' ] = oTags;
    oReturn[ '<%= PROMPTS_KEY_IMAGE_SETTINGS %>' ] = oImages;

    return oReturn;
  }

</script>
