
<!-- This page is at the top of those settings responsible for extending a
design_template.  All subpages included within provide UI for some aspect of
a design template that must be determined from opening a design AI file and
extracting information. -->

<%
  rendering_tags_form = false
  rendering_images_form = false

  if( @tags != nil ) then
    if( @tags.length > 0 ) then
      rendering_tags_form = true
%>
<%=   render :partial => "design_template_tags" %>
<%
    end
  end
%>

<%
  if( @images != nil ) then
    if( @images.length > 0 ) then
      rendering_images_form = true
%>
<%=   render :partial => "design_template_images" %>
<%
    end
  end
%>


<script>



  function validate_design_template_settings()
  {
    var bReturn = true;
    <%
    if( rendering_tags_form ) then %>
        if( !validate_tag_values() )
        {
          bReturn = false;
        }
    <%
    end %>

    <%
    if( rendering_images_form ) then  %>
      if( !validate_image_values() )
      {
        bReturn = false;
      }
    <%
    end %>

    return bReturn;
  }




  function build_template_settings()
  {
    var oTags = {};
    var oImages = {};
<%
    if( rendering_tags_form ) then %>
      oTags = build_tags_data();
<%  end %>

<%  if( rendering_images_form ) then %>
      oImages = build_images();
<%  end %>

    oReturn = {};
    oReturn[ 'tag_settings' ] = oTags;
    oReturn[ 'image_settings' ] = oImages;

    return oReturn;
  }

</script>
